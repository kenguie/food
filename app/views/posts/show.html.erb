<div class="leftbox">

<h1><%= @post.user.fname %>'s Question from <%= @post.user.restname %> in <%= @post.user.restcity %>, <%= @post.user.reststate %></h1>

<p id="notice"><%= notice %></p>

<p>
  <strong>Body:</strong>
  <%= @post.body %> 
</p>

<p> Comments: </p>
<% @post.comments.each do |comment| %>
        
  <% if comment.post.id == @post.id %>   
    <li class="comment"> <%= comment.body %> 
    | by <%= comment.user.fname %> from <%= comment.user.restname %> in <%= comment.user.restcity %>, <%= comment.user.reststate %> <br/> </li> 
  <% else %>

  <% end %>
<% end %>   

</div>

<div class="rightbox">
<div class="info">
  <div class="picframe">
  <%= image_tag @post.user.avatar.url %> 
  </div>
</div>

<div class="map">
  <div style='width: 500px;'>
  <div id="map" style='width: 475px; height: 400px;'></div>
</div>

</div>
</div>

<!-- <h3> Following </h3>
  <ul>

  </ul>
<br/> -->


<%if current_user && @post.user != current_user %>
  <% if current_user.followeds.include? @post.user %>
      <%= link_to 'unfollow', unfollow_post_path(@post.user), method: :post %> 
    <% else %>
      <%= link_to 'follow', follow_post_path(@post.user), method: :post %>
  <% end %>
<% end %>

<br/>
<%= link_to 'Post Comment', new_post_comment_path(@post) %>  |
<%= link_to "More posts from " + @post.user.fname, @post %> |

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %> | 
<%= link_to 'Edit Your Information', edit_user_registration_path %> | 
<%= link_to 'Log out', destroy_user_session_path, method: :delete %>

<script type="text/javascript">
handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  
  markers = handler.addMarkers(<%=raw @hash.to_json %>);

  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
  handler.getMap().setZoom(15);
});
</script>